{"ast":null,"code":"import _slicedToArray from\"C:/Projects/client-niche-product-website-assignment-12/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from\"axios\";import swal from'sweetalert';import useAuth from'../../Hooks/useAuth';import{Table}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ManageOrder=function ManageOrder(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];console.log(orders);var _useAuth=useAuth(),user=_useAuth.user;useEffect(function(){fetch(\"http://localhost:8000/allEvents\").then(function(res){return res.json();}).then(function(data){return setOrders(data);});},[user.email]);var handleDelete=function handleDelete(id){// console.log(id);\nswal({title:\"Are you sure?\",text:\"Once deleted, you will not be able to recover this file!\",icon:\"warning\",buttons:true,dangerMode:true}).then(function(willDelete){if(willDelete){fetch(\"http://localhost:8000/deleteEvents/\".concat(id),{method:\"Delete\",headers:{\"content-type\":\"application/json\"}},[]).then(function(res){return res.json();}).then(function(data){if(data.deletedCount){var restOrder=orders.filter(function(item){return item._id!==id;});setOrders(restOrder);}});swal(\"Your file has been deleted!\",{icon:\"success\"});}else{swal(\"Your file is safe!\");}});};var statusChange=function statusChange(id,order){console.log(order===null||order===void 0?void 0:order.state);if((order===null||order===void 0?void 0:order.state)===\"pending\"){axios.put(\"http://localhost:8000/updateState/\".concat(id),{state:\"Shipped\"}).then(function(res){if(res.data.modifiedCount){console.log(res.data);order.state=\"Shipped\";var modified=orders.map(function(item){return item._id===id?order:item;});setOrders(modified);swal(\"Congratulations!\",\"Your Order is Shipped successfully\",\"success\");}});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All Events\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Products\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Confirm\"})]})}),orders.map(function(event,index){return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:event===null||event===void 0?void 0:event.carName}),/*#__PURE__*/_jsx(\"td\",{children:event===null||event===void 0?void 0:event.userName}),/*#__PURE__*/_jsx(\"td\",{children:event===null||event===void 0?void 0:event.email}),/*#__PURE__*/_jsx(\"td\",{children:event===null||event===void 0?void 0:event.address}),/*#__PURE__*/_jsx(\"td\",{children:event===null||event===void 0?void 0:event.state}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(event._id);},className:\"btn btn-danger text-white\",children:\"Delete\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return statusChange(event===null||event===void 0?void 0:event._id,event);},className:\"btn btn-primary\",children:\"Payment\"})})]})});})]})]});};export default ManageOrder;","map":{"version":3,"sources":["C:/Projects/client-niche-product-website-assignment-12/src/Dashboard/Manage Order/ManageOrder.js"],"names":["React","useEffect","useState","axios","swal","useAuth","Table","ManageOrder","orders","setOrders","console","log","user","fetch","then","res","json","data","email","handleDelete","id","title","text","icon","buttons","dangerMode","willDelete","method","headers","deletedCount","restOrder","filter","item","_id","statusChange","order","state","put","modifiedCount","modified","map","event","index","carName","userName","address"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\n\r\nimport swal from 'sweetalert';\r\nimport useAuth from '../../Hooks/useAuth'\r\nimport { Table } from 'react-bootstrap';\r\n\r\nconst ManageOrder = () => {\r\n\r\n    const [orders, setOrders] = useState([]);\r\n    console.log(orders)\r\n    const { user } = useAuth();\r\n\r\n    useEffect(() => {\r\n        fetch(`http://localhost:8000/allEvents`)\r\n            .then(res => res.json())\r\n            .then(data => setOrders(data));\r\n    }, [user.email]);\r\n\r\n    const handleDelete = id => {\r\n        // console.log(id);\r\n        swal({\r\n            title: \"Are you sure?\",\r\n            text: \"Once deleted, you will not be able to recover this file!\",\r\n            icon: \"warning\",\r\n            buttons: true,\r\n            dangerMode: true,\r\n        })\r\n            .then((willDelete) => {\r\n                if (willDelete) {\r\n\r\n                    fetch(`http://localhost:8000/deleteEvents/${id}`, {\r\n                        method: \"Delete\",\r\n                        headers: { \"content-type\": \"application/json\" },\r\n                    }, [])\r\n                        .then(res => res.json())\r\n                        .then(data => {\r\n                            if (data.deletedCount) {\r\n                                const restOrder = orders.filter((item) => item._id !== id);\r\n                                setOrders(restOrder);\r\n                            }\r\n                        })\r\n\r\n\r\n\r\n                    swal(\"Your file has been deleted!\", {\r\n                        icon: \"success\",\r\n                    });\r\n                } else {\r\n                    swal(\"Your file is safe!\");\r\n                }\r\n            });\r\n    }\r\n\r\n\r\n    const statusChange = (id, order) => {\r\n        console.log(order?.state);\r\n\r\n        if (order?.state === \"pending\") {\r\n            axios\r\n                .put(`http://localhost:8000/updateState/${id}`, {\r\n                    state: \"Shipped\",\r\n                })\r\n                .then((res) => {\r\n                    if (res.data.modifiedCount) {\r\n                        console.log(res.data);\r\n                        order.state = \"Shipped\";\r\n                        const modified = orders.map((item) =>\r\n                            item._id === id ? order : item\r\n                        );\r\n                        setOrders(modified);\r\n                        swal(\"Congratulations!\", \"Your Order is Shipped successfully\", \"success\");\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <h2>All Events</h2>\r\n\r\n            <Table striped bordered>\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">Products</th>\r\n                        <th scope=\"col\">Name</th>\r\n                        <th scope=\"col\">Email</th>\r\n                        <th scope=\"col\">Address</th>\r\n                        <th scope=\"col\">Status</th>\r\n                        <th scope=\"col\">Action</th>\r\n                        <th scope=\"col\">Confirm</th>\r\n\r\n                    </tr>\r\n                </thead>\r\n                {\r\n                    orders.map((event, index) => (\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>{index + 1}</td>\r\n                                <td>{event?.carName}</td>\r\n                                <td>{event?.userName}</td>\r\n                                <td>{event?.email}</td>\r\n\r\n                                <td>{event?.address}</td>\r\n                                <td>{event?.state}</td>\r\n                                <td><button onClick={() => handleDelete(event._id)} className=\"btn btn-danger text-white\" >Delete</button></td>\r\n                                <td><button onClick={() => statusChange(event?._id,event)} className=\"btn btn-primary\">Payment</button></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    ))\r\n                }\r\n\r\n            </Table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManageOrder;"]},"metadata":{},"sourceType":"module"}